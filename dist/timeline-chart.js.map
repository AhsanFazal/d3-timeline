{"version":3,"sources":["timeline-chart.js"],"names":[],"mappings":"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","file":"timeline-chart.js","sourcesContent":["class TimelineChart {\n    constructor(element, data, opts) {\n        let self = this;\n\n        element.classList.add('timeline-chart');\n\n        let options = this.extendOptions(opts);\n\n        let allElements = data.reduce((agg, e) => agg.concat(e.data), []);\n\n        let minDt = d3.min(allElements, this.getPointMinDt);\n        let maxDt = d3.max(allElements, this.getPointMaxDt);\n\n        let elementWidth = options.width || element.clientWidth;\n        let elementHeight = options.height || element.clientHeight;\n\n        let margin = {\n            top: 0,\n            right: 0,\n            bottom: 20,\n            left: 0\n        };\n\n        let width = elementWidth - margin.left - margin.right;\n        let height = elementHeight - margin.top - margin.bottom;\n\n        let groupWidth = 200;\n\n        let x = d3.time.scale()\n            .domain([minDt, maxDt])\n            .range([groupWidth, width]);\n\n        let xAxis = d3.svg.axis()\n            .scale(x)\n            .orient('bottom')\n            .tickSize(-height);\n\n        let zoom = d3.behavior.zoom()\n            .x(x)\n            .on('zoom', zoomed);\n\n        let svg = d3.select(element).append('svg')\n            .attr('width', width + margin.left + margin.right)\n            .attr('height', height + margin.top + margin.bottom)\n            .append('g')\n            .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')')\n            .call(zoom);\n\n        svg.append('defs')\n            .append('clipPath')\n            .attr('id', 'chart-content')\n            .append('rect')\n            .attr('x', groupWidth)\n            .attr('y', 0)\n            .attr('height', height)\n            .attr('width', width - groupWidth)\n\n        svg.append('rect')\n            .attr('class', 'chart-bounds')\n            .attr('x', groupWidth)\n            .attr('y', 0)\n            .attr('height', height)\n            .attr('width', width - groupWidth)\n\n        svg.append('g')\n            .attr('class', 'x axis')\n            .attr('transform', 'translate(0,' + height + ')')\n            .call(xAxis);\n\n        let groupHeight = height / data.length;\n        let groupSection = svg.selectAll('.group-section')\n            .data(data)\n            .enter()\n            .append('line')\n            .attr('class', 'group-section')\n            .attr('x1', 0)\n            .attr('x2', width)\n            .attr('y1', (d, i) => {\n                return groupHeight * (i + 1);\n            })\n            .attr('y2', (d, i) => {\n                return groupHeight * (i + 1);\n            });\n\n        let groupLabels = svg.selectAll('.group-label')\n            .data(data)\n            .enter()\n            .append('text')\n            .attr('class', 'group-label')\n            .attr('x', 0)\n            .attr('y', (d, i) => {\n                return (groupHeight * i) + (groupHeight / 2) + 5.5;\n            })\n            .attr('dx', '0.5em')\n            .text(d => d.label);\n\n        let lineSection = svg.append('line').attr('x1', groupWidth).attr('x2', groupWidth).attr('y1', 0).attr('y2', height).attr('stroke', 'black');\n\n        let groupIntervalItems = svg.selectAll('.group-interval-item')\n            .data(data)\n            .enter()\n            .append('g')\n            .attr('clip-path', 'url(#chart-content)')\n            .attr('class', 'item')\n            .attr('transform', (d, i) => `translate(0, ${groupHeight * i})`)\n            .selectAll('.dot')\n            .data(d => d.data.filter(_ => _.type === TimelineChart.TYPE.INTERVAL))\n            .enter();\n\n        let intervalBarHeight = 0.8 * groupHeight;\n        let intervalBarMargin = (groupHeight - intervalBarHeight) / 2;\n        let intervals = groupIntervalItems\n            .append('rect')\n            .attr('class', withCustom('interval'))\n            .attr('width', (d) => x(d.to) - x(d.from))\n            .attr('height', intervalBarHeight)\n            .attr('y', intervalBarMargin)\n            .attr('x', (d) => x(d.from));\n\n        let intervalTexts = groupIntervalItems\n            .append('text')\n            .text(d => d.label)\n            .attr('fill', 'white')\n            .attr('class', withCustom('interval-text'))\n            .attr('y', (groupHeight / 2) + 5)\n            .attr('x', (d) => x(d.from));\n\n        let groupDotItems = svg.selectAll('.group-dot-item')\n            .data(data)\n            .enter()\n            .append('g')\n            .attr('clip-path', 'url(#chart-content)')\n            .attr('class', 'item')\n            .attr('transform', (d, i) => `translate(0, ${groupHeight * i})`)\n            .selectAll('.dot')\n            .data(d => {\n                return d.data.filter(_ => _.type === TimelineChart.TYPE.POINT);\n            })\n            .enter();\n\n        let dots = groupDotItems\n            .append('circle')\n            .attr('class', withCustom('dot'))\n            .attr('cx', d => x(d.at))\n            .attr('cy', groupHeight / 2)\n            .attr('r', 5);\n\n        if (options.tip) {\n            if (d3.tip) {\n                let tip = d3.tip().attr('class', 'd3-tip').html(options.tip);\n                svg.call(tip);\n                dots.on('mouseover', tip.show).on('mouseout', tip.hide)\n            } else {\n                console.error('Please make sure you have d3.tip included as dependency (https://github.com/Caged/d3-tip)');\n            }\n        }\n\n        zoomed();\n\n        function withCustom(defaultClass) {\n            return d => d.customClass ? [d.customClass, defaultClass].join(' ') : defaultClass\n        }\n\n        function zoomed() {\n            if (self.onVizChangeFn && d3.event) {\n                self.onVizChangeFn.call(self, {\n                    scale: d3.event.scale,\n                    translate: d3.event.translate,\n                    domain: x.domain()\n                });\n            }\n\n            svg.select('.x.axis').call(xAxis);\n\n            svg.selectAll('circle.dot').attr('cx', d => x(d.at));\n            svg.selectAll('rect.interval').attr('x', d => x(d.from)).attr('width', d => x(d.to) - x(d.from));\n\n            svg.selectAll('.interval-text').attr('x', function(d) {\n                    let positionData = getTextPositionData.call(this, d);\n                    if ((positionData.upToPosition - groupWidth - 10) < positionData.textWidth) {\n                        return positionData.upToPosition;\n                    } else if (positionData.xPosition < groupWidth && positionData.upToPosition > groupWidth) {\n                        return groupWidth;\n                    }\n                    return positionData.xPosition;\n                }).attr('text-anchor', function(d) {\n                    let positionData = getTextPositionData.call(this, d);\n                    if ((positionData.upToPosition - groupWidth - 10) < positionData.textWidth) {\n                        return 'end';\n                    }\n                    return 'start';\n                })\n                .attr('dx', function(d) {\n                    let positionData = getTextPositionData.call(this, d);\n                    if ((positionData.upToPosition - groupWidth - 10) < positionData.textWidth) {\n                        return '-0.5em';\n                    }\n                    return '0.5em';\n                }).text(function(d) {\n                    var positionData = getTextPositionData.call(this, d);\n                    var percent = (positionData.width - options.textTruncateThreshold) / positionData.textWidth;\n                    if (percent < 1) {\n                        if (positionData.width > options.textTruncateThreshold) {\n                            return d.label.substr(0, Math.floor(d.label.length * percent)) + '...';\n                        } else {\n                            return '';\n                        }\n                    }\n\n                    return d.label;\n                });\n\n            function getTextPositionData(d) {\n                this.textSizeInPx = this.textSizeInPx || this.getComputedTextLength();\n                var from = x(d.from);\n                var to = x(d.to);\n                return {\n                    xPosition: from,\n                    upToPosition: to,\n                    width: to - from,\n                    textWidth: this.textSizeInPx\n                }\n            }\n        }\n    }\n    extendOptions(ext = {}) {\n        let defaultOptions = {\n            tip: undefined,\n            textTruncateThreshold: 30\n        };\n        Object.keys(ext).map(k => defaultOptions[k] = ext[k]);\n        return defaultOptions;\n    }\n    getPointMinDt(p) {\n        return p.type === TimelineChart.TYPE.POINT ? p.at : p.from;\n    }\n    getPointMaxDt(p) {\n        return p.type === TimelineChart.TYPE.POINT ? p.at : p.to;\n    }\n    onVizChange(fn) {\n        this.onVizChangeFn = fn;\n        return this;\n    }\n}\n\nTimelineChart.TYPE = {\n    POINT: Symbol(),\n    INTERVAL: Symbol()\n};\n\nmodule.exports = TimelineChart;\n"],"sourceRoot":"/source/"}